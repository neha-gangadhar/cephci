tests:
  - test:
      name: install ceph pre-requisites
      module: install_prereq.py
      abort-on-fail: true

  - test:
     name: ceph ansible
     module: test_ansible.py
     config:
       ansi_config:
           ceph_test: True
           ceph_origin: distro
           ceph_repository: rhcs
           osd_scenario: lvm
           osd_auto_discovery: False
           journal_size: 1024
           ceph_stable: True
           ceph_stable_rh_storage: True
           fetch_directory: ~/fetch
           copy_admin_key: true
           dashboard_enabled: False
           ceph_conf_overrides:
               global:
                 osd_pool_default_pg_num: 64
                 osd_default_pool_size: 2
                 osd_pool_default_pgp_num: 64
                 mon_max_pg_per_osd: 1024
               mon:
                 mon_allow_pool_delete: true
                 debug mon: 5
               mds:
                 mds_bal_split_size: 100
                 mds_bal_merge_size: 5
                 mds_bal_fragment_size_max: 10000
                 debug mds: 5
           cephfs_pools:
             - name: "cephfs_data"
               pgs: "8"
             - name: "cephfs_metadata"
               pgs: "8"
     desc: test cluster setup using ceph-ansible
     destroy-cluster: False
     abort-on-fail: true
  - test:
      name: Clone_status
      module: snapshot_clone.clone_status.py
      polarion-id: CEPH-83573501,CEPH-83573504,CEPH-83573502
      desc: Checks the clone status and states of the clone process
      abort-on-fail: false
  - test:
      name: Retain_Snapshots
      module: snapshot_clone.retain_snapshots.py
      polarion-id: CEPH-83573521,CEPH-83573415
      desc: Retains the snapshots after deletig the subvolume
      abort-on-fail: false
  - test:
      name: Remove_Subvolume_clone
      module: snapshot_clone.clone_remove_subvol.py
      polarion-id: CEPH-83573499
      desc: Clone a subvolume and remove the orginal volume and verify the contents in subvolume
      abort-on-fail: false
  - test:
      name: Test Max Snapshot limit
      module: snapshot_clone.max_snapshot_limit.py
      polarion-id: CEPH-83573520
      desc: Validate the max snapshot that can be created under a root FS sub volume level.Increase by 50 at a time until it reaches the max limit.
      abort-on-fail: false
  - test:
      name: Snapshot reboot
      module: snapshot_clone.snapshot_reboot.py
      polarion-id: CEPH-83573418,CEPH-83573420
      desc: Create a Snapshot, reboot the node and rollback the snapshot
      abort-on-fail: false

